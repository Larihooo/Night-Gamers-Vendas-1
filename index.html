<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8"><title>Night Gamers | InÃ­cio</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="sidebar">
        <h2>Night Gamers</h2>
        <a href="index.html" class="active">ğŸ  <span>InÃ­cio</span></a>
        <a href="feed.html">ğŸ“± <span>Feed Social</span></a>
        <a href="perfil.html">ğŸ‘¤ <span>Minha Conta</span></a>
        <a href="admin.html" id="admin-link" style="display:none; color:#f59e0b">âš™ï¸ <span>Painel Admin</span></a>
    </div>
    <div class="main-content">
        <h1>Produtos</h1>
        <div id="grid-produtos" style="display:grid; grid-template-columns:repeat(auto-fill, minmax(250px, 1fr)); gap:20px;"></div>
    </div>
    <script type="module">
        import { db, auth, ADMIN_EMAIL } from './firebase.js?v=1';
        import { collection, onSnapshot } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";
        import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";

        onAuthStateChanged(auth, user => { if(user?.email === ADMIN_EMAIL) document.getElementById('admin-link').style.display='flex'; });

        onSnapshot(collection(db, "produtos"), snap => {
            const grid = document.getElementById('grid-produtos');
            grid.innerHTML = "";
            snap.forEach(doc => {
                const p = doc.data();
                grid.innerHTML += `<div class="card" onclick="location.href='detalhes.html?id=${doc.id}'" style="cursor:pointer">
                    <img src="${p.imagem}" style="width:100%; border-radius:10px; height:150px; object-fit:cover">
                    <h3>${p.nome}</h3><p style="color:#6366f1">R$ ${p.preco}</p>
                </div>`;
            });
        });
    </script>
</body>
</html>